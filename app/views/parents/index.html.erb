<%- model_class = Parent -%>
<%= javascript_include_tag 'search_bootstrap_table' %>
<%= render 'layouts/messages' %>
<div id="parent-index">
  <div class="row head-sp">
    <div class="col-xs-2">
      <h1>ผู้ปกครอง</h1>
    </div>

    <div class="col-xs-2 col-xs-offset-8" style="text-align: right; margin-top: 10px;">
      <%= link_to t('.addparent', :default => t("helpers.links.addparent")),
      new_parent_path,
      :class => 'btn btn-add-ps float-right'%>
    </div>
  </div>

  <div class="content-student-parent">

    <div id="toolbar">
      <%= form_tag(parents_path, method: :get, id: "search-form") do %>
      
      <span>เลือกระดับชั้น</span>
      <select name="grade_select" id="grade_select" class="btn-grades selectpicker" onchange="this.form.submit()">
        <option value='all'>ทั้งหมด</option>
        <% Grade.all.each do |grade| %>
        <option value="<%= grade.name %>"<%= @filter_grade.to_s == grade.name.to_s ? "selected" : "" %>> <%= grade.name %> </option>
        <% end %>
      </select>
      
      <span>เลือกตามห้อง</span>
      <select name="class_select" id="class_select"  onchange="this.form.submit()" class="btn-grades selectpicker">
        <option value='all'>ทั้งหมด</option>
        <% @classroom_display.each do |classroom| %>
        <option value="<%= classroom %>"<%= @filter_class.to_s == classroom.to_s ? "selected" : "" %>> <%= classroom %> </option>
        <% end %>
      </select>
      
      <% end %>
    </div>

    <table id="table"
    data-toggle="table"
    data-pagination="true"
    data-pagination-loop="false"
    data-url="parents.json"
    data-side-pagination="server"
    data-search="true"
    data-sort-name="full_name"
    data-sort-order="desc"
    data-toolbar="#toolbar" >
      <thead>
        <tr>
          <th data-field="full_name" data-sortable="true" style="width: 300px;" >ชื่อ-สกุล</th>
          <th data-field="mobile" data-sortable="true">โทรศัพท์</th>
          <th data-field="email" data-sortable="true">อีเมล์</th>
          <th data-field="relationships.name" data-sortable="true">ความสัมพันธ์</th>
          <th data-field="students.full_name" data-sortable="true">ชื่อ-สกุลนักเรียน</th>
          <th data-field="edit" ></th>
        </tr>
      </thead>
    </table>
  </div>
</div>