<style>
  body {
    margin-bottom: 0px !important;
  }
</style>
<div class="container" id="warp" style="margin-top:100px;">
  <div class="row">
    <%= render 'layouts/messages' %>
      <div class="col-lg-12">
        <div>
          <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), validate: true) do |f| %>
            <div class="form-sign-in" id="formSingUp">
              <div class="row">
                <div class="col-xs-12">
                  <%= image_tag School.first.logo_url, class: "img-responsive logo-login" %>
                </div>
              </div>
              <div class="row text-center">
                <h1>
                  <%= t('start')%>
                </h1>
              </div>
              <div class="row">
                <div class="field form-group">
                  <%= f.input :full_name, label: false, placeholder: t('full_name'), input_html: { class: 'validate-sign-in' }, required: true %>
                </div>
              </div>
              <div class="row">
                <div class="field form-group">
                  <%= f.input :email,
                              required: true,
                              autofocus: true,
                              label: false,
                              input_html: { autocomplete: "email", class: 'validate-sign-in', placeholder: t('email'),
                              onkeyup: "validateUniqueness('#{email_uniqueness_ckeck_validates_path}', this.id)" } %>
                </div>
              </div>
              <div class="row">
                <div class="field form-group">
                  <%= f.input :password,
                              label: false,
                              required: true,
                              hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length),
                              input_html: { autocomplete: "new-password", class: 'validate-sign-in', placeholder: t('password') } %>
                </div>
              </div>
              <div class="row">
                <div class="field form-group">
                  <%= f.input :password_confirmation,
                              label: false,
                              input_html: { autocomplete: "new-password", placeholder: t('confirm_password') } %>
                </div>
              </div>
              <div class="row">
                <div class="form-actions py-3">
                  <%= button_tag "Sign up", class: 'btn-outline-success btn-block', type: 'button', id: 'newStep', onclick: 'showNewSchool()', disabled: true %>
                </div>
              </div>
            </div>
            <div class="new-school" id="formSchool">
              <h1>School Setting</h1>
              <div class="row">
                <div class="col-lg-12">
                  <div class="col-md-6">
                    <h3><%= t('.Message1') %></h3>
                  </div>
                  <div class="col-md-6">
                    <h3><%= t('.Message2') %></h3>
                  </div>
                  <div class="controls content">
                    <%= f.simple_fields_for :school, validate: true do |school_form| %>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <%= school_form.input :name, label: t('.name_thai'), input_html: { id: 'user_school_name' }, required: true %>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <%= school_form.input :address, label: t('.address'), input_html: { id: 'user_school_address' }, required: true %>
                          </div>
                        </div>  
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <%= school_form.input :name_eng, label: t('.name_eng'), input_html: { id: 'user_school_name_eng' }, required: true %>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <%= school_form.input :phone, label: t('.phone'), input_html: { id: 'user_school_phone' }, required: true %>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <%= school_form.input :fax, label: t('.fax'), input_html: { id: 'user_school_fax' } %>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-3">
                          <div class="form-group">
                            <%= school_form.input :subdomain_name, label: 'Subdomain name', input_html: { id: 'user_school_subdomain_name', 
                            onkeyup: "validateUniqueness2('#{subdomain_uniqueness_ckeck_validates_path}', this.id)" }, required: true %>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <br>
                            <h4>.somsri.io</h4>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <%= school_form.input :email, label: t('.email'), input_html: { id: 'user_school_email' }, required: true %>
                          </div>
                        </div>
                      </div>

                      <%= school_form.simple_fields_for :school_settings do |school_setting_form| %>
                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <%= school_setting_form.input :school_year, label: t('.schoolyear'), input_html: { id: 'user_school_school_year' }, as: :integer, required: true %>
                            </div>
                          </div>
                          <div class="col-md-3">
                            <div class="form-group">
                              <%= school_setting_form.input :semesters, label: t('.semesters'), input_html: { id: 'user_school_semesters' }, as: :integer, required: true %>
                            </div>
                          </div>
                          <% end %>
                          <div class="col-md-4">
                            <div class="form-group">
                              <%= school_form.input :tax_id, label: t('.tax_id'), input_html: { id: 'user_school_tax_id' } %>
                            </div>
                          </div>

                          <div class="col-md-2">
                            <div class="form-group">
                              <%= school_form.input :branch, label: t('.branch'), input_html: { id: 'user_school_branch' } %>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <h3><%= t('.Message3') %></h3>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <h3><%= t('.Message4') %></h3>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group">
                              <%= school_form.input :logo,  as: :file, multiple: true, accept:'image/*', input_html: { onChange: 'changeLogo(event, "logoSchool")'} %>
                              <%= image_tag School.first.logo, id: 'logoSchool', class: 'img-lg'  %>
                            </div>
                            <div id="errorMessage" class="invalid-feedback" style="display: none;"></div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <%= school_form.input :note, label: t('.note'), input_html: { id: 'user_school_note' } %>
                            </div>
                          </div>
                        </div>
                      <%= f.button :submit, 'Save', class: 'btn-outline-success btn-block', disabled: true  %>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
            <% end %>
        </div>
      </div>
  </div>
</div>
<% if SiteConfig.get_cache.display_username_password_on_login %>
  <div class="container">
    <div class="col-md-offset-2 col-md-7 form-type">
      <div class="col-md-12">
        <p><button class="status_type_login">ฝ่ายบุคคล</button>&nbsp;&nbsp;&nbsp;<strong> User name:</strong> admin@bananacoding.com
          <strong>Password:</strong> password</p>
      </div>
      <div class="col-md-12" style="margin-top: 10px;">
        <p><button class="status_type_login">ฝ่ายการเงิน</button>&nbsp;&nbsp;<strong> User name:</strong> finance@bananacoding.com
          <strong>Password:</strong> password</p>
      </div>
    </div>
  </div>
<% end %>
<footer id="footer">
  <div class="container">
    <p class="text-center">© Copyright somsri.io</p>
  </div>
</footer>

<script>
  $(document).ready(function() {
    $('#formSchool').hide();

    $('.validate-sign-in').change(function() {
      enableButton('new_user', 'newStep');
    })
  });
</script>
