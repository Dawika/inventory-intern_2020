<style>
  body{
    margin-bottom: 0px !important;
  }
</style>

<div class="container margintop-signin" id="warp">
  <div class="row">
    <%= render 'layouts/messages' %>
    <div class="col-md-12">

      <div class="form-sign-in signin-page-one">
        <%= simple_form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
          <div class="row">
            <div class="col-xs-12">
              <% if @school.present? %>
                <%= image_tag @school&.logo_url, class: "img-responsive logo-login" %>
                <% else %>
                <%= image_tag 'new_somsri_logo2.png', class: "img-responsive logo-login" %>
              <% end %>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 text-center">
            <b>LOGIN</b>
            </div>
          </div><br>
          <div class="row">
          <% if @subdomain.present? || @subdomain == "www"%>
          <div class="col-md-12">
            <label for="Email" class="font-input-signin"><%=t('email')%></label>
          </div>
          <div class="col-md-12">
              <div class="field form-group">
                <%= f.email_field :email, autofocus: true, class: "form-control input-login", onkeyup: "validateUserBySubdomain('#{user_by_subdomain_check_validates_path}', this.id, #{SiteConfig.get_cache.web_cms ? 'false' : 'true'})" %>
            </div>
          </div>
            <% else %>
          <div class="col-md-12">
            <label for="Email" class="font-input-signin"><%=t('email')%></label>
          </div>
            <div class="col-md-12">
              <div class="field form-group">
                <%= f.email_field :email, autofocus: true, class: "form-control input-login"%>
              </div>
            </div>
            <% end %>
          </div>
          <div class="row">
          <div class="col-md-12">
            <label for="password" class="font-input-signin"><%=t('password')%></label>
          </div>
          <div class="col-md-12">
            <div class="field form-group">
              <%= f.password_field :password, autocomplete: "off", class: "form-control input-login",style: "margin-top:10px;" %>
            </div>
          </div>
          </div>
          <div class="row">
            <div class="col-xs-6">
              <% if devise_mapping.rememberable? -%>
              <div class="field form-group text-remember">
                <%= f.check_box :remember_me, class: "form-inline" %>
                <label style="font-weight:normal" for="user_remember_me"><%= t('keep_me_signed_in') %></label>
              </div>
              <% end -%>
            </div>       
            <div class="col-xs-6 text-right">
              <%- if devise_mapping.recoverable? && controller_name != 'passwords' && controller_name != 'registrations' %>
                <%= link_to t("forgot_your_password"), new_password_path(resource_name) %><br />
              <% end -%>
            </div>
          </div>
          <div class="row">
            <div class="sign-in actions text-center">
              <%= f.submit t('sign_in'), class: "btn btn-signin", disabled: true %>
            </div>
          </div><br>
          <% if (@school.present?) && (@school_config.enable_rollcall) && (@school_config.roll_call_apk_url)  %>
            <div class="row">
              <div class="download_android">
                <a href="<%= @school_config.roll_call_apk_url %>" target="_blank"><i class="fa fa-android"></i><%= t('download_somsri_rollcall') %></a>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
<% if @school_config.display_username_password_on_login %>
  <div class="container">
    <div class="col-md-offset-2 col-md-7 form-type">
      <div class="col-md-12">
        <p><button class="status_type_login">ฝ่ายบุคคล</button>&nbsp;&nbsp;&nbsp;<strong> User name:</strong> admin@bananacoding.com
        <strong>Password:</strong> password</p>
      </div>
      <div class="col-md-12" style="margin-top: 10px;">
        <p><button class="status_type_login">ฝ่ายการเงิน</button>&nbsp;&nbsp;<strong> User name:</strong> finance@bananacoding.com
        <strong>Password:</strong> password</p>
      </div>
    </div>
  </div>
<% end %>
<footer id="footer">
  <div class="container">
    <p class="text-center">Copyright © 2017-2020 Banana Coding Co., Ltd. All rights reserved.</p>
  </div>
</footer>

<script>
  $(document).ready(function() {
    if (<%= !@subdomain.present? %> || <%= @subdomain == "www"%>){
    $(".btn-signin").prop("disabled", false)
    }
    $('form.simple_form').enableClientSideValidations();
  });
</script>
