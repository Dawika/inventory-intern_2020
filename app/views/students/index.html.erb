<%- model_class = Student -%>
<div class="container-fluid">
  <div class="row head-sp justify-content-between">
    <div class="col-4">
      <h1>นักเรียน</h1>
    </div>
    <%= link_to t('.addstudent', :default => t("helpers.links.addstudent")),
                new_student_path,
                :class => 'btn btn-add-ps float-right' %>
  </div>
  <div class="content-student-parent">
      <%= form_tag(students_path, method: :get, id: "search-form", class:"row search-form-st justify-content-between") do %>
        <div class="col-4 form-group">
          <%= text_field_tag :search, params[:search], placeholder: "ค้นหา..." ,class: 'search-sp'%>
          <%= button_tag(type: 'submit', class: "btn btn-search-sp") do %>
            <i class="fa fa-search"></i>
          <% end %>
        </div>
        <div class="col-4 form-group float-right-search">
          <tr>
            <td><label for="grade_select">เลือกระดับชั้น</label></td>
            <td>
              <select name="grade_select" id="grade_select" class="btn-grades" onchange="this.form.submit()">
                  <option value='all'>ทั้งหมด</option>
                  <% Grade.all.each do |grade| %>
                    <option value="<%= grade.name %>"<%= @filter_grade.to_s == grade.name.to_s ? "selected" : "" %>> <%= t(grade.name) %> </option>
                  <% end %>
              </select>
            </td>
          </tr>
        </div>
      <% end %>
    <table class="table table-sp-report">
      <thead>
        <tr>
          <th style="width: 300px;">ชื่อ - นามสกุล</th>
          <th>ชื่อเล่น</th>
          <th>ระดับชั้น</th>
          <th>ห้องเรียน</th>
          <th>เลขที่ในห้อง</th>
          <th>รหัสประจำตัวนักเรียน</th>
          <th>เพศ</th>
          <th>วันเกิด</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @students.each do |student| %>
          <tr>
            <td><%= student.full_name_with_title%></td>
            <td><%= student.nickname %></td>
            <td><%= student.grade.nil? ? "" : t(student.grade.name) %></td>
            <td><%= student.classroom %></td>
            <td><%= student.classroom_number %></td>
            <td><%= student.student_number %></td>
            <td><%= student.gender.nil? ? "" : t(student.gender.name) %></td>
            <td><%= student.birthdate.nil? ? '' : student.birthdate.strftime('%d/%m/%Y') %></td>
            <td>
              <%= link_to t('.show', :default => t("helpers.links.show")),
                          student_path(student), :class => 'btn btn-se' %>
              <%= link_to t('.edit', :default => t("helpers.links.edit")),
                          edit_student_path(student), :class => 'btn btn-se' %>
              <%= link_to "<i class='fa fa-times'></i>".html_safe ,
                          student_path(student),
                          :method => :delete,
                          :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                          :class => 'btn btn-delete-sp' %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div><%= will_paginate @students %></div>
  </div>
</div>
