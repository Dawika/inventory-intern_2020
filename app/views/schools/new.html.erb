
<div class="container" id="warp" style="margin-top:100px;">
  <div class="row">
    <%= render 'layouts/messages' %>
      <div class="col-lg-12">
        <div>
          <%= simple_form_for @school, action: @school.new_record? ? 'create' : 'update', validate: true do |f| %>
            <div class="form-sign-in" id="formSingUp">
              <div class="row">
                <div class="col-xs-12">
                  <%= image_tag @school.logo, class: "img-responsive logo-login" %>
                </div>
              </div>
              <div class="row text-center start-signup">
                <b>สมัครใช้งานวันนี้ ใช้ฟรี 3 เดือน</b><br>
                <b>ไม่จำกัดจำนวนนักเรียน ไม่จำกัดจำนวนบุคลากร</b><br><br>
              </div>    
              <%= f.simple_fields_for :users, validate: true do |user_form| %>
                <div class="row"> 
                  <div class="field form-group">
                    <%= user_form.input :full_name, label: false, autofocus: true, placeholder: t('full_name'),
                    input_html: { class: 'validate-sign-in', id: 'school_users_full_name'}, required: true %>
                  </div>
                </div>
                <div class="row">
                  <div class="field form-group">
                    <%= user_form.input :email,
                                required: true,
                                label: false,
                                input_html: { autocomplete: "email", class: 'validate-sign-in', placeholder: t('email'), id: 'school_users_email',
                                onkeyup: "validateUniqueness('#{email_uniqueness_check_validates_path}', this.id)" } %>
                  </div>
                </div>
                <div class="row">
                  <div class="field form-group">
                    <%= user_form.input :password,
                                label: false,
                                required: true,
                                hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length),
                                input_html: { autocomplete: "new-password", id: 'school_users_password', class: 'validate-sign-in', placeholder: t('password') } %>
                  </div>
                </div>
                <div class="row">
                  <div class="field form-group">
                    <%= user_form.input :password_confirmation,
                                label: false,
                                input_html: { autocomplete: "new-password", class: 'validate-sign-in', placeholder: t('confirm_password'), id: 'school_users_password_confirmation' } %>
                  </div>
                </div>
                <div class="row">
                  <div class="form-actions py-3 text-center">
                    <%= button_tag "สมัครใช้งานเลย", class: 'btn btn-getStarted animated fadeInDown', type: 'button', id: 'newStep', onclick: 'showNewSchool("setting")', disabled: true %>
                  </div>
                </div>
              </div>
              <% end %>
              <%= render 'setting_school_setting',f: f %>
              <%= render 'select_plan',f: f %>
                <!-- Modal -->
                <div class="modal fade " id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                  <div class="modal-dialog"  role="document">
                    <div class="modal-content">
                      <%= image_tag @school.logo, class: "img-responsive logo-login" %>
                      <h3 class="text-center">ยินดีต้อนรับ เข้าสู่ระบบสมศรี </h3>
                      <h3 class="text-center">ท่านสามารถทดลองใช้งานฟรี <font color="orange"> 3 เดือน</font></h3>
                      <h3 class="text-center">สำหรับ<font color="orange">ความช่วยเหลือ </font>ในการนำข้อมูลเข้าระบบเช่น บุคลากร, นักเรียน</h3>
                      <h3 class="text-center">สามารถติดต่อทีมงานได้ที่ เบอร์ <font color="orange">053-200-078</font></h3><br>
                      <div class="text-center"><%= f.button :submit,'เริ่มต้นใช้งาน.', class: "btn-bg-submit" %></div>
                    </div>
                  </div>
                </div>
                <!-- End Modal -->
                <!-- Modal skip -->
                <div class="modal fade " id="myModal-skip" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                  <div class="modal-dialog"  role="document">
                    <div class="modal-content">
                      <%= image_tag @school.logo, class: "img-responsive logo-login" %>
                      <h3 class="text-center">ยินดีต้อนรับ เข้าสู่ระบบสมศรี </h3>
                      <h3 class="text-center">ท่านสามารถทดลองใช้งานฟรี <font color="orange"> 3 เดือน</font></h3>
                      <h3 class="text-center">สำหรับ<font color="orange">ความช่วยเหลือ </font>ในการนำข้อมูลเข้าระบบเช่น บุคลากร, นักเรียน</h3>
                      <h3 class="text-center">สามารถติดต่อทีมงานได้ที่ เบอร์ <font color="orange">053-200-078</font></h3><br>
                      <div class="text-center"><%= f.button :submit,'เริ่มต้นใช้งาน', class: "btn-bg-submit" %></div>
                    </div>
                  </div>
                </div>
                <!-- End Modal -->
            <% end %>
        </div>
      </div>
  </div>
</div>
<footer id="footer">
  <div class="container">
    <p class="text-center">© Copyright somsri.io</p>
  </div>
</footer>

<script>
  $(document).ready(function() {
    $('form.simple_form').enableClientSideValidations();
    $('#new_school abbr').hide()
    $('#formSchool').hide();
    $('#formModal').hide();
    $('#formplan').hide();
    $('#school_school_settings_semesters').removeClass('is-valid')
    $('.validate-sign-in').keyup(function() {
      enableButtonFormAdmin('new_school', 'newStep');
    })
    $('#modal').click(function() {
      $('#myModal').modal({backdrop: 'static', keyboard: false})
      $('#new_school').find(':submit').attr('disabled', false);
    })
    $('#modal-skip').click(function() {
      $('#myModal-skip').modal({backdrop: 'static', keyboard: false})
      $('#new_school').find(':submit').attr('disabled', false);
      $('.sec_5 input').prop("disabled", true);
      $('input:radio[name="school[licenses_attributes][0][plan_id]"]').val([<%= Plan.find_by(package_name: 'annual fee').id %>]);
    })
  });
</script>
