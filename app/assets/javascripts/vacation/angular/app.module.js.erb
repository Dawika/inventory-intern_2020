(function() {
  'use strict';
  var appVacation = angular.module('somsri.vacation', [
    'somsri.vacation.assets',
    'somsri.vacation.main',
    'somsri.translate',
    'oc.lazyLoad',
    'ui.router.stateHelper',
    'ui.bootstrap',
    'ui.bootstrap.fontawesome',
    'ngSanitize'
  ]);

  appVacation.config(['stateHelperProvider', 'ASSETS', '$urlRouterProvider', '$httpProvider', function(stateHelperProvider, ASSETS, $urlRouterProvider, $httpProvider) {

    // Default as JSON Format
    $httpProvider.defaults.headers.post['Accept'] = 'application/json, text/javascript';
    $httpProvider.defaults.headers.post['Content-Type'] = 'application/json; charset=utf-8';
    $httpProvider.defaults.headers.common['Accept'] = 'application/json, text/javascript';
    $httpProvider.defaults.headers.common['Content-Type'] = 'application/json; charset=utf-8';

    stateHelperProvider.
      state({
        url: '/',
        name: 'menu',
        templateUrl: "<%= asset_path('vacation/angular/components/menu/menuView.html') %>",
        controller: 'menuCtrl as menu',
        resolve: {
          resources: ['$ocLazyLoad', function($ocLazyLoad) {
            return $ocLazyLoad.load([
              ASSETS.somsri.vacation.menu
            ]);
          }]
        }
      }).
      state({
        url: '/dashboard',
        name: 'dashboard',
        templateUrl: "<%= asset_path('vacation/angular/components/dashboard/dashboardView.html') %>",
        controller: 'dashboardCtrl as dashboard',
        resolve: {
          resources: ['$ocLazyLoad', function($ocLazyLoad) {
            return $ocLazyLoad.load([
              ASSETS.somsri.vacation.dashboard
            ]);
          }]
        }
      }).
      state({
        url: '/calendar',
        name: 'calendar',
        templateUrl: "<%= asset_path('vacation/angular/components/calendar/calendarView.html') %>",
        controller: 'calendarCtrl as calendar',
        resolve: {
          resources: ['$ocLazyLoad', function($ocLazyLoad) {
            return $ocLazyLoad.load([
              ASSETS.somsri.vacation.calendar
            ]);
          }]
        }
      }).
      state({
        url: '/leave_rules',
        name: 'leave_rules',
        templateUrl: "<%= asset_path('vacation/angular/components/leave_rules/leaveRulesView.html') %>",
        controller: 'leaveRulesCtrl as leaveRules',
        resolve: {
          resources: ['$ocLazyLoad', function($ocLazyLoad) {
            return $ocLazyLoad.load([
              ASSETS.somsri.vacation.leave_rules
            ]);
          }]
        }
      }).
      state({
        url: '/setting',
        name: 'setting',
        templateUrl: "<%= asset_path('vacation/angular/components/setting/settingView.html') %>",
        controller: 'settingCtrl as setting',
        resolve: {
          resources: ['$ocLazyLoad', function($ocLazyLoad) {
            return $ocLazyLoad.load([
              ASSETS.somsri.vacation.setting
            ]);
          }]
        }
      })

    $urlRouterProvider.when("", "/");
  }]);

  appVacation.run();
})();
